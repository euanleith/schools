<pre>
Want to check the security of Irish secondary schools' websites
<h1>Method</h1>
List of secondary schools <a href="https://www.education.ie/en/Publications/Statistics/Data-on-Individual-Schools/" target="_blank">here</a> (Post Primary Schools 2018/19 Provisional)
Take out emails from list, and get url associated, as well as rolls

Search by roll at https://www.education.ie/en/find-a-school/School-Detail/?roll=XXXXXX (<a href="https://www.education.ie/en/find-a-school/School-Detail/?roll=60030V" target="_blank">e.g.</a>)
to get education.ie page for each school, where email and website for the school can be found

Remove any emails at external addresses (e.g. eircom.net), ~as well as any duplicates

Perform DNS lookup using dnspython
  looking for;
    A, AAAA, MX, DS, CAA, SPF, TXT, CNAME

Perform zgrab (a banner grabber)
  looking for;
    port 80: HTTP-dets
    port 443, with SNI: TLS-dets, HTTP-dets
    port 443, without SNI: TLS-dets, HTTP-dets
<h1>Results</h1>
<h2>SSL certificates</h2>
<img src="./imgs/barbools.png",width="350" height="300">
Definitions;
  Timely: the ssl cert hasn't expired
  Not self signed: the ssl cert isn't self-signed
  Browser trusted: whoever signed the ssl cert is on a list of CA's listed by the browser (most browsers have very similar lists)

This graph shows the proportion of schools for which each of these are true
Note that this was performed on port 443 (https sites)
Note that this only shows those schools for which a url was given, and for which the banner grabber didn't return an error
  as seen above each bar
<h3>Method:</h3>
Got SSL certs info using zgrab (a banner grabber)
<h3>Analysis:</h3>
All increased from 2018-19
However, there's still a significant number of schools for which these are false

Note that without 'Timely' or 'Browser Trusted', the https site will be inaccessible,
and if 'Self-signed', the browser with put up a warning, likely deterring users from accessing the site
So either only the http site is being used despite having https, or the site is inaccessible altogether

<h2>MX Records</h2>
<img src="./imgs/MX.png",width="300" height="350">
Showing proportion of schools whose email servers are hosted by various companies, or are self-hosted
Note that this only shows those schools for which a url was given, and for which the banner grabber didn't return an error
  as seen above each pie chart
<h3>Method:</h3>
Got MX records using zgrab (a banner grabber)
Counted the first external company name found in each MX record, if one was found, otherwise added to 'self-hosted'
Note that schools could have both external and local servers; as long as they had any external servers, they were counted
Note that if there were multiple external servers, only the first was counted
<h3>Analysis:</h3>
Mostly hosted, with the number of self-hosted schools dropping
Increasingly dominated by outlook and google, which has pros and cons;
  better protection from potential attackers, spam, etc.
  but data is accessible to these companies
<h2>DNS</h2>
<img src="./imgs/DNS.png",width="300" height="350">
Showing the number of schools with each DNS record;
  AAAA, MX, DS, CAA, SPF, TXT, CNAME (2019 only), A (2019 only)
Note that this only shows those schools for which a url was given, and for which the DNS lookup didn't return an error
  as seen above each figure
<h3>Method:</h3>
Got DNS info using dnspython
Note that CNAME and A records were only checked for in 2019
Note that MX records are more accurate in 2019
<h3>Analysis:</h3>
A:
  All schools but one have,
    That school's website currently doesn't work as it also has no AAAA record
AAAA:
  Few have
MX:
  All schools but one have,
    That one is the same school that doesn't have an A record
  Note that 2019 is a more accurate measurement than 2018 for MX records
DS, CAA, SPF:
  Almost none have
  Note that SPF records are usually contained in txts however, so the lack here isn't indicative of few SPF records
TXT:
  Usually contains spf records, so those with TXT records likely have SPF records
  Those that don't have TXT records may still have SPF records; most likely those that have an email server have SPF
CNAME:
  ~(do like mx)
~Overall not unusual, but would recommended improvement if possible
<h2>Cipher Suites:</h2>
<div>
<img src="./imgs/cipher 443 with SNI.png"style="float:left",width="300" height="350">
<img src="./imgs/cipher 443 without SNI.png",width="300" height="350">
</div>
Green suites are recommended, red are not recommended, as outlined by IANA
Note that this only shows those schools for which a url was given, and for which the banner grabber didn't return an error
  as seen above each pie chart
<h3>Method:</h3>
Got cipher suites info using zgrab (a banner grabber)
Note that each school only chose one cipher suite in this case, they likely have others
<h3>Analysis:</h3>
Increasingly dominated by TLS_ECDHE_PSK_WITH_NULL_SHA384 and TLS_DH_DSS_WITH_AES_128_CBC_SHA
Note that TLS_DH_DSS_WITH_AES_128_CBC_SHA (the second most common suite) isn't awful, but still isn't recommended by IANA
Otherwise, most schools returned recommended suites
<h2>Port 443 Listeners</h2>
<img src="./imgs/port443.png",width="300" height="350">
Showing the proportion of schools who responded on port 443 (which in this case implies an https site)
Note that this only shows those schools for which a url was given
  as seen below each bar
<h3>Method:</h3>
Counted how many schools responded on port 443
Note that while checking both 443 with and without SNI, some only responded to one of them. This still implies https and so were counted
Note that some returned errors which don't necessarily mean they don't have https (e.g. i/o timeout), these were still counted as not having https
<h3>Analysis:</h3>
Note that 2019 is more accurate than 2018
Most schools responded in 2019, however there are still a number who didn't
Note that despite having https, many schools don't redirect from their http site to their https site
<h2>Cryptographic Keys</h2>
<img src="./imgs/fp.png",width="300" height="350"">
Showing the proportion of schools who have shared keys, where n is the number of sites sharing a key ('1' means unique keys)
Note that this only shows those schools for which a url was given, and for which the banner grabber didn't return an error
  as seen above each pie chart
<h3>Method:</h3>
Got keys info using zgrab (a banner grabber)
Counted the number of sites who share each key
Summed each key with the same number of sites sharing
<h3>Analysis:</h3>
There's an increasing number of schools with unique keys
While not the majority, there's still a large number of keys shared
This is likely due to hosts sharing keys between multiple users
There's one key which is shared by a significant number of schools (59 in 2018 and 78 in 2019), ~which are all from one host
<h2>Misc.</h2>
Education and Training Board Ireland (ETBI):
  ETBI has a number of websites, which I also briefly checked. This returned similar results to the schools' websites
  Note that many schools use these sites as their email client
Data given to education.ie:
  A number of schools didn't provide any email and/or url to education.ie
  Many schools gave emails from external clients (e.g. name@gmail.com), despite having a mail server for their domain
    This may be an issue if there is an increase in self-hosted mail servers, as the schools must use those servers for it to be worthwhile
  A few schools gave strange emails/urls (which were cleaned for this check)
</pre>
